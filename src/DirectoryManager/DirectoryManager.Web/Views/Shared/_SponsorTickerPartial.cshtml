@using DirectoryManager.Data.Models.TransferModels
@using DirectoryManager.DisplayFormatting.Helpers
@model List<SponsorTickerItemVm>

@{
    // Build internal listing link from key (presentation layer)
    string ListingHref(string key)
    {
        var rel = FormattingHelper.ListingPath(key);   // e.g. "/site/xyz"
        if (!rel.StartsWith("/")) rel = "/" + rel;
        return rel;
    }
}

 

@if (Model != null && Model.Count > 0)
{
    <div class="sponsor-ticker" aria-label="Sponsors">
        <div class="sponsor-ticker__row">
            <div class="sponsor-ticker__label">Sponsors:</div>

            <div class="sponsor-ticker__viewport">
                <div class="sponsor-ticker__track">
                    @for (var set = 0; set < 4; set++)
                    {
                        <div class="sponsor-ticker__set" @(set > 0 ? "aria-hidden=\"true\"" : "")>
                            @for (var i = 0; i < Model.Count; i++)
                            {
                                var s = Model[i];
                                <a target="_blank" href="@s.Link">@s.Name</a>

                                var isLastItem = (i == Model.Count - 1);
                                var isLastSet = (set == 4 - 1);

                                // • between sponsors inside a set
                                if (!isLastItem)
                                {
                                    <span class="sponsor-ticker__sep">•</span>
                                }
                                // | at the end of the set (between sets)
                                else if (!isLastSet)
                                {
                                    <span class="sponsor-ticker__sep">|</span>
                                }
                            }
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
}
