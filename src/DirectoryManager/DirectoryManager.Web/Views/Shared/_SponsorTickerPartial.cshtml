@using DirectoryManager.Data.Models.TransferModels
@using DirectoryManager.DisplayFormatting.Helpers
@model List<SponsorTickerItemVm>

@{
    // Build internal listing link from key (presentation layer)
    string ListingHref(string key)
    {
        var rel = FormattingHelper.ListingPath(key);   // e.g. "/site/xyz"
        if (!rel.StartsWith("/")) rel = "/" + rel;
        return rel;
    }
}

@if (Model != null && Model.Count > 0)
{
    <div class="sponsor-ticker" aria-label="Sponsors">
        <div class="sponsor-ticker__row">
            <div class="sponsor-ticker__label">Sponsors:</div>

            <div class="sponsor-ticker__viewport">
                <div class="sponsor-ticker__track">

                    @* Repeat SAME set 4x so you never see a blank “phase” *@
                    @for (var set = 0; set < 4; set++)
                    {
                        <div class="sponsor-ticker__set" @(set > 0 ? "aria-hidden=\"true\"" : "")>
                            @for (var i = 0; i < Model.Count; i++)
                            {
                                var s = Model[i];
                                <a class="no-app-link" href="@ListingHref(s.DirectoryEntryKey)">@s.Name</a>

                                @if (i < Model.Count - 1)
                                {
                                    <span class="sponsor-ticker__sep">•</span>
                                }
                            }
                        </div>
                    }

                </div>
            </div>
        </div>
    </div>
}
